<!DOCTYPE html>
<html lang="en">
<head>
	<!--including introjs.css" -->
	<link href="/static/css/introjs.css" rel="stylesheet" type="text/css">
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-118567294-1"></script>
	<script>
  		window.dataLayer = window.dataLayer || [];
  		function gtag(){dataLayer.push(arguments);}
  		gtag('js', new Date());

  		gtag('config', 'UA-118567294-1');
	</script>

	<title>FastTrack</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	

	<script type=text/javascript>
 	 $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
	</script>
	<style >
		#feedbackform {
		    color: white;
		    font-size: 20px;
		    animation-name: example;
		    animation-duration: 1s;
		    animation-iteration-count: infinite;
		}

		@keyframes example {
		    from {color: Cyan;}
		    to {color: white;}
		}
		@media (min-width: 768px) {
		  .navbar-nav.navbar-center {
		    position: absolute;
		    left: 50%;
		    transform: translatex(-50%);
		  }
		}
		#map {
			width: 100%;
			height: 667px;
			background-color: grey;
		}
		
		#legend {
			font-family: Arial, sans-serif;
			background: #fff;
			padding: 10px;
			margin: 10px;
			border: 3px solid #000;
			height: 16%;
			width: 15.5%;
		}
		#legend h3 {
			margin-top: 0;
			font-size: 15px;
			font-weight: bold;
		}
		#legend img {
			vertical-align: middle;
			height: 25%;
			width: 25%;
		}
		
		#results_body {
			height: 500px;
		    max-height: 500px;
		    overflow-y: scroll;
		}

		#resultsbtn1, #resultsbtn1li1, #resultsbtn1li2, #resultsbtn1li3, #resultsbtn2, #resultsbtn2li1, #resultsbtn2li2, #resultsbtn2li3, #resultsbtn3, #resultsbtn3li1, #resultsbtn3li2, #resultsbtn3li3 {
			display: none;
		}

		.autocomplete {
		  /*the container must be positioned relative:*/
		  position: relative;
		  display: inline-block;
		}
		input {
		  border: 1px solid transparent;
		  background-color: #f1f1f1;
		  padding: 10px;
		  font-size: 16px;
		}
		input[type=text] {
		  background-color: #f1f1f1;
		  width: 100%;
		}

		.autocomplete-items {
		  position: absolute;
		  border: 1px solid #d4d4d4;
		  border-bottom: none;
		  border-top: none;
		  z-index: 99;
		  /*position the autocomplete items to be the same width as the container:*/
		  top: 100%;
		  left: 0;
		  right: 0;
		}
		.autocomplete-items div {
		  padding: 10px;
		  cursor: pointer;
		  background-color: #fff; 
		  border-bottom: 1px solid #d4d4d4; 
		}
		.autocomplete-items div:hover {
		  /*when hovering an item:*/
		  background-color: #e9e9e9; 
		}
		.autocomplete-active {
		  /*when navigating through the items using the arrow keys:*/
		  background-color: DodgerBlue !important; 
		  color: #ffffff; 
		}
		.loader {
			display: none;
		    border: 16px solid #f3f3f3; /* Light grey */
		    border-top: 16px solid #3498db; /* Blue */
		    border-radius: 50%;
		    width: 120px;
		    height: 120px;
		    animation: spin 2s linear infinite;
		}

		@keyframes spin {
		    0% { transform: rotate(0deg); }
		    100% { transform: rotate(360deg); }
		}

	</style>
</head>
<body>

	<script type="text/javascript">
		var hasline = 0;
		var line;
		var markers = [];
		var googlemapsgeneratedplots = [];
		var resultsids = [
			["resultsbtn1", "resultsbtn1li1", "resultsbtn1li2", "resultsbtn1li3"],
			["resultsbtn2", "resultsbtn2li1", "resultsbtn2li2", "resultsbtn2li3"], 
			["resultsbtn3", "resultsbtn3li1", "resultsbtn3li2", "resultsbtn3li3"]
		];

		var lineSymbol;

		var polylineOptionsActual;
		var polylineOptionsActual2;
		var polylineOptionsActual3;
		var polylineOptionsActual4;
		var polylineOptionsActual5;

		var rendererOptions;
		var rendererOptions2;
		var rendererOptions3;
		var rendererOptions4;	
		var rendererOptionswalk;

		var directionsService;
		var directionsService2;
		var directionsService3;
		var directionsService4;
		var directionsService5;

		var directionsDisplay;
		var directionsDisplay2;
		var directionsDisplay3;
		var directionsDisplay4;
		var walkingdirectionsDisplay;

		$(document).ready(function(){

			

			//getLocation();
			var userlat;
			var userlong;
			
			var options = {
			  enableHighAccuracy: true,
			  timeout: 5000,
			  maximumAge: 0
			};

			navigator.geolocation.getCurrentPosition(success, error, options);

			function error(err) {
			  console.warn(`ERROR(${err.code}): ${err.message}`);
			}

			function success(pos) {
			  userlat = pos.coords.latitude;
			  userlong = pos.coords.longitude;
			}
			var origloaderhtml = document.getElementById("results_body").innerHTML;
			var random;
		    $("#calculate").click(function(){
		    	var div = document.getElementById('results_body');
			    //div.innerHTML = ""
		    	//alert("Mouse down over p1!");
		    document.getElementById("results_body").innerHTML = origloaderhtml;

		    	/*if (hasline == 1) {
		    		line.setMap(null);
		    		directionsDisplay.setMap(null);
					directionsDisplay2.setMap(null);

					
					for(i=0; i<markers.length; i++){
					        markers[i].setMap(null);
					    }
		    		//$("#results_body").empty();
		    	}*/

		    	//put a 2nd array into googlemapsgeneratedplots [[markers], [directionsdisplay], [polyline]]

		    	//remove markers
		    	for (var i = 0, size = googlemapsgeneratedplots.length; i < size; i++)
		    	{
		    		var currgenplots = googlemapsgeneratedplots[i];
			    	for (var j = 0, size = currgenplots[0].length; j < size ; j++) 
			    	{
			    		currgenplots[0][j].setMap(null);
			    	}
			    	//remove directionsdisplay
			    	for (var j = 0, size = currgenplots[1].length; j < size ; j++) 
			    	{
			    		currgenplots[1][j].setMap(null);
			    	}

			    	//clear polylines
			    	for (var j = 0, size = currgenplots[2].length; j < size ; j++) 
			    	{
			    		currgenplots[2][j].setMap(null);
			    	}
		    	}
		    	
		    	$("#loaderelement").show();

		    	var srcval;
	    		if (document.getElementById('myInput').value == "Use My Location")
	    		{
	    			srcval = "usercoordsused" + str(userlat) + "," +str(userlong);
	    		}
	    		else
	    		{
	    			srcval = $('input[name="src"]').val()
	    		}
		    	$.getJSON($SCRIPT_ROOT + '/FastTrackPython', {

			        src: srcval,
			        dst: $('input[name="dst"]').val()
			      }, function(data) {

			      	lineSymbol = {
					    path: google.maps.SymbolPath.CIRCLE,
					    fillOpacity: 1,
					    scale: 3
					};

					polylineOptionsActual = new google.maps.Polyline({
					    strokeColor: 'orange',
					    strokeOpacity: 0,
					    icons: [{
					      icon: lineSymbol,
					      offset: '0',
					      repeat: '10px'
					    }]
					});

					

					polylineOptionsActual2 = new google.maps.Polyline({
					    strokeColor: 'green',
					    strokeOpacity: 0,
					    icons: [{
					      icon: lineSymbol,
					      offset: '0',
					      repeat: '10px'
					    }]
					});

					polylineOptionsActual4 = new google.maps.Polyline({
					    strokeColor: 'orange',
					    strokeOpacity: 0,
					    icons: [{
					      icon: lineSymbol,
					      offset: '0',
					      repeat: '10px'
					    }]
					});

					

					polylineOptionsActual5 = new google.maps.Polyline({
					    strokeColor: 'green',
					    strokeOpacity: 0,
					    icons: [{
					      icon: lineSymbol,
					      offset: '0',
					      repeat: '10px'
					    }]
					});

					rendererOptions = {
					    map: map,
					    suppressMarkers: true,
					    polylineOptions: polylineOptionsActual
					};

					rendererOptions2 = {
					    map: map,
					    suppressMarkers: true,
					    polylineOptions: polylineOptionsActual2
					};

					rendererOptions3 = {
					    map: map,
					    suppressMarkers: true,
					    polylineOptions: polylineOptionsActual4
					};

					rendererOptions4 = {
					    map: map,
					    suppressMarkers: true,
					    polylineOptions: polylineOptionsActual5
					};

					polylineOptionsActual3 = new google.maps.Polyline({
					    strokeColor: 'grey',
					    strokeOpacity: 0,
					    icons: [{
					      icon: lineSymbol,
					      offset: '0',
					      repeat: '10px'
					    }]
					});

					rendererOptionswalk = {
					    map: map,
					    suppressMarkers: true,
					    polylineOptions: polylineOptionsActual3
					};

					directionsService = new google.maps.DirectionsService;
					directionsService2 = new google.maps.DirectionsService;
					directionsService3 = new google.maps.DirectionsService;
					directionsService4 = new google.maps.DirectionsService;
					directionsService5 = new google.maps.DirectionsService;

					directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);
					directionsDisplay2 = new google.maps.DirectionsRenderer(rendererOptions2);
					directionsDisplay3 = new google.maps.DirectionsRenderer(rendererOptions3);
					directionsDisplay4 = new google.maps.DirectionsRenderer(rendererOptions4);
					walkingdirectionsDisplay = new google.maps.DirectionsRenderer(rendererOptionswalk);

					var alldirectionsServices = [directionsService, directionsService2, directionsService3, directionsService4];

					var alldirectionsDisplay = [directionsDisplay, directionsDisplay2, directionsDisplay3, directionsDisplay4];

					var routeplottingindex = 0;

			      	$("#loaderelement").hide();
			      	console.log(data.result);
			      	var div = document.getElementById('results_body');
			      	var busroutecounter = 0;

			      	if (data.result[0][0].startsWith("Sorry"))
			      	{
			      		div.innerHTML += data.result[0][0];
			      		var currlist = data.result[1];
	      				
	      				var time = currlist[1];
	      				var destcoords = currlist[2];
	      				var message = "Walk from your current location to " + document.getElementById('myInput2').value;
	      				document.getElementById(resultsids[0][0]).innerHTML = "Walking ("+time+" mins)";
	      				document.getElementById(resultsids[0][1]).innerHTML = message;
	      				document.getElementById(resultsids[0][0]).style.display = "block";
	      				document.getElementById(resultsids[0][1]).style.display = "block";

						walkingdirectionsDisplay.setMap(map);

						var org = new google.maps.LatLng (userlat, userlong);
						var dst = new google.maps.LatLng (parseFloat(destcoords.split(",")[0]), parseFloat(destcoords.split(",")[1]));

						directionsService5.route({
						    origin: org,
						    destination: dst,
						    travelMode: 'WALKING'
						  }, function(response, status) {
						  	walkingdirectionsDisplay.setDirections(response);
						    if (status === 'OK') {
						      walkingdirectionsDisplay.setDirections(response);
						    } else {
						      window.alert('Directions request failed due to ' + status);
						    }
						  });

						var marker = new google.maps.Marker({
						    position: new google.maps.LatLng(userlat, userlong),
						    label: 'Current Location',
						    title: 'Current Location',
						    map:map
						});

						var marker2 = new google.maps.Marker({
						    position: new google.maps.LatLng(parseFloat(destcoords.split(",")[0]), parseFloat(destcoords.split(",")[1])),
						    label: $('input[name="dst"]').val(),
						    title: $('input[name="dst"]').val(),
						    map:map
						});

						googlemapsgeneratedplots.push([[marker, marker2], [directionsDisplay], []]);
			      	}
			      	else
			      	{
			      		for (var i = 0, size = data.result.length; i < size ; i++)
			      		{
			      			var currlist = data.result[i];
			      			if (currlist[0].startsWith("walking route"))
			      			{
			      				console.log("list " + i.toString() + " starts with walking	route");

			      				var time = currlist[1];
			      				var destcoords = currlist[2];
			      				var message = "Walk from your current location to " + document.getElementById('myInput2').value;
			      				document.getElementById(resultsids[i][0]).innerHTML = "Walking ("+time+" mins)";
			      				document.getElementById(resultsids[i][1]).innerHTML = message;
			      				document.getElementById(resultsids[i][0]).style.display = "block";
			      				document.getElementById(resultsids[i][1]).style.display = "block";

								walkingdirectionsDisplay.setMap(map);

								var org = new google.maps.LatLng (userlat, userlong);
								var dst = new google.maps.LatLng (parseFloat(destcoords.split(",")[0]), parseFloat(destcoords.split(",")[1]));

								directionsService5.route({
								    origin: org,
								    destination: dst,
								    travelMode: 'WALKING'
								  }, function(response, status) {
								  	walkingdirectionsDisplay.setDirections(response);
								    if (status === 'OK') {
								      walkingdirectionsDisplay.setDirections(response);
								    } else {
								      window.alert('Directions request failed due to ' + status);
								    }
								  });

								var marker = new google.maps.Marker({
								    position: new google.maps.LatLng(userlat, userlong),
								    label: 'Current Location',
								    title: 'Current Location',
								    map:map
								});

								var marker2 = new google.maps.Marker({
								    position: new google.maps.LatLng(parseFloat(destcoords.split(",")[0]), parseFloat(destcoords.split(",")[1])),
								    label: $('input[name="dst"]').val(),
								    title: $('input[name="dst"]').val(),
								    map:map
								});

								googlemapsgeneratedplots.push([[marker, marker2], [directionsDisplay], []]);
			      			}
			      			else
			      			{
			      				busroutecounter = busroutecounter + 1;
			      				console.log("list " + i.toString() + " no walking route");

			      				var msg1 = currlist[0];
			      				var msg2 = currlist[1];
			      				var msg3 = currlist[2];
			      				var hashedpolyline = currlist[3];
			      				var srcstopcoords = currlist[4];
			      				var dststopcoords = currlist[5];
			      				var finaldststopcoords = currlist[6]; 
			      				var srcstopname =currlist[7];
			      				var dststopname =currlist[8];
			      				var total_time = currlist[9];
			      				document.getElementById(resultsids[i][0]).innerHTML = "Bus Time: ("+total_time+" mins)";
			      				document.getElementById(resultsids[i][1]).innerHTML = msg1;
			      				document.getElementById(resultsids[i][2]).innerHTML = msg2;
			      				document.getElementById(resultsids[i][3]).innerHTML = msg3;
			      				document.getElementById(resultsids[i][0]).style.display = "block";
			      				document.getElementById(resultsids[i][1]).style.display = "block";
			      				document.getElementById(resultsids[i][2]).style.display = "block";
			      				document.getElementById(resultsids[i][3]).style.display = "block";

			      				/*PLOTS THE BUS POLYLINE*/
			      				var decode = google.maps.geometry.encoding.decodePath(hashedpolyline);
						        line = new google.maps.Polyline({
							        path: decode,
							        strokeColor: '#00008B',
							        strokeOpacity: 1.0,
							        strokeWeight: 4,
							        zIndex: 3
							    });
							    line.setMap(map);								

								/*console.log("routeplottingindex: " + routeplottingindex);
								directionsServicefirst = alldirectionsServices[routeplottingindex];
								directionsdisplayfirst = alldirectionsDisplay[routeplottingindex++];
								console.log("routeplottingindex: " + routeplottingindex);
								directionsServicesec = alldirectionsServices[routeplottingindex];
								directionsdisplaysec = alldirectionsDisplay[routeplottingindex++];

								var alldirectionsServices = [directionsService, directionsService2, directionsService3, directionsService4];

					var alldirectionsDisplay = [directionsDisplay, directionsDisplay2, directionsDisplay3, directionsDisplay4];*/
								var directionsdisplaysarray = [];

								if (busroutecounter == 1)
								{
									directionsDisplay.setMap(map);
								  	
								  	var org = new google.maps.LatLng (userlat, userlong);
								  	var dst = new google.maps.LatLng (parseFloat(srcstopcoords.split(",")[0]), parseFloat(srcstopcoords.split(",")[1]));

								  	directionsService.route({
								    	origin: org,
								    	destination: dst,
								    	travelMode: 'WALKING'
								 	 }, function(response, status) {
								  		directionsDisplay.setDirections(response);
								  	  if (status === 'OK') {
								  	    directionsDisplay.setDirections(response);
								  	  } else {
								   	   window.alert('Directions request failed due to ' + status);
								   	 }
								   	});

								   	directionsDisplay2.setMap(map);
								   	var org2 = new google.maps.LatLng (parseFloat(dststopcoords.split(",")[0]), parseFloat(dststopcoords.split(",")[1]));
									var dst2 = new google.maps.LatLng (parseFloat(finaldststopcoords.split(",")[0]), parseFloat(finaldststopcoords.split(",")[1]));

									directionsService2.route({
									  origin: org2,
									  destination: dst2,
									  travelMode: 'WALKING'
									}, function(response, status) {
									  	directionsDisplay2.setDirections(response);
									  if (status === 'OK') {
									    directionsDisplay2.setDirections(response);
									  } else {
									    window.alert('Directions request failed due to ' + status);
									  }
									
								 	});

								 	directionsdisplaysarray.push(directionsDisplay);
								 	directionsdisplaysarray.push(directionsDisplay2);

								}
								else if (busroutecounter == 2)
								{
									directionsDisplay3.setMap(map);
								  	
								  	var org = new google.maps.LatLng (userlat, userlong);
								  	var dst = new google.maps.LatLng (parseFloat(srcstopcoords.split(",")[0]), parseFloat(srcstopcoords.split(",")[1]));

								  	directionsService3.route({
								    	origin: org,
								    	destination: dst,
								    	travelMode: 'WALKING'
								 	 }, function(response, status) {
								  		directionsDisplay3.setDirections(response);
								  	  if (status === 'OK') {
								  	    directionsDisplay3.setDirections(response);
								  	  } else {
								   	   window.alert('Directions request failed due to ' + status);
								   	 }
								   	});

								   	directionsDisplay4.setMap(map);
								   	var org2 = new google.maps.LatLng (parseFloat(dststopcoords.split(",")[0]), parseFloat(dststopcoords.split(",")[1]));
									var dst2 = new google.maps.LatLng (parseFloat(finaldststopcoords.split(",")[0]), parseFloat(finaldststopcoords.split(",")[1]));

									directionsService4.route({
									  origin: org2,
									  destination: dst2,
									  travelMode: 'WALKING'
									}, function(response, status) {
									  	directionsDisplay4.setDirections(response);
									  if (status === 'OK') {
									    directionsDisplay4.setDirections(response);
									  } else {
									    window.alert('Directions request failed due to ' + status);
									  }
									
								 	});

								 	directionsdisplaysarray.push(directionsDisplay3);
								 	directionsdisplaysarray.push(directionsDisplay4);
								}


							 	var marker = new google.maps.Marker({
								    position: new google.maps.LatLng(userlat, userlong),
								    label: 'Current Location',
								    title: 'Current Location',
								    map:map
								});

								var marker2 = new google.maps.Marker({
								    position: new google.maps.LatLng (parseFloat(srcstopcoords.split(",")[0]), parseFloat(srcstopcoords.split(",")[1])),
								    label: srcstopname,
								    title: srcstopname,
								    map:map
								});


								var marker3 = new google.maps.Marker({
								  position: new google.maps.LatLng (parseFloat(dststopcoords.split(",")[0]), parseFloat(dststopcoords.split(",")[1])),
								  label: dststopname,
								  title: dststopname,
								  map:map
								});		

								var marker4 = new google.maps.Marker({
								  position: new google.maps.LatLng (parseFloat(finaldststopcoords.split(",")[0]), parseFloat(finaldststopcoords.split(",")[1])),
								  label: document.getElementById('myInput2').value,
								  title: document.getElementById('myInput2').value,
								  map:map
								});


								//put a 2nd array into googlemapsgeneratedplots [[markers], [directionsdisplay], [polyline]]
								googlemapsgeneratedplots.push([[marker, marker2, marker3, marker4], directionsdisplaysarray, [line]]);

			      			}
			      		}
			      	}

			      	console.log(googlemapsgeneratedplots);
			      	//return;
			      });
			      return false;
		    });
		});	


	</script>

	<script src="/static/js/intro.js"></script>

	<script>
	function changeText() { 
	    var sourcetxt = document.getElementById('usersrcfield').value
	    var desttxt = document.getElementById('userdstfield').value
	    document.getElementById('results_body').innerHTML = sourcetxt + desttxt
	}
	</script>

<script type="text/javascript">
	//starts tutor

	function starttutorial() {
		var intro = introJs();
	  intro.setOptions({
	  steps: [
	    { 
	      intro: "Welcome to the FastTrack tutorial!"
	    },
	    {
	      element: '#myInput',
	      intro: "If you want to use your current location, leave this field blank. Otherwise, type where you would like your trip to begin (tip: use arrow keys to interact with autocomplete",
	      position: 'right'
	    },
	    {
	      element: '#myInput2',
	      intro: "Type the location you want your trip to end.",
	      position: 'right'
	    },
	    {
	      element: '#results_body',
	      intro: 'Results will show you up to four possible routes that will be ordered in increasing trip-completion time. Click on each route to get more info. The best route is plotted by default',
	      position: 'right'
	    },
	    {
	      element: '#map',
	      intro: "The routes will be displayed here!"
	    },
	    {
	      element: '#feedbackform',
	      intro: "After using our app, please leave us your anonymous feedback!"
	    }
	  ]
	  });
		intro.start();
	};	
</script>

<script type="text/javascript">
	function resultsbtnfunction(buttonnum)
	{
		//plot elements in buttonnum subarray of googlemapsgeneratedplots
		var firstsubarray = googlemapsgeneratedplots[buttonnum];
		var elemname = "#collapseExample"+buttonnum;
		if ($(elemname).hasClass('in'))
		{
			//hide markers:
			for (var i = 0, size = firstsubarray[0].length; i < size ; i++)
			{
				firstsubarray[0][i].setVisible(false);	
			}

			//hide directions display:
			for (var i = 0, size = firstsubarray[1].length; i < size ; i++)
			{
				firstsubarray[1][i].setMap(null);	
			}

			//hide polyline:
			for (var i = 0, size = firstsubarray[2].length; i < size ; i++)
			{
				firstsubarray[2][i].setMap(null);	
			}
			//put a 2nd array into googlemapsgeneratedplots [[markers], [directionsdisplay], [polyline]]
			//googlemapsgeneratedplots.push([[marker, marker2], [directionsDisplay], []]);
		}
		else
		{
			//plot markers:
			for (var i = 0, size = firstsubarray[0].length; i < size ; i++)
			{
				firstsubarray[0][i].setVisible(true);	
			}

			//plot directions display:
			for (var i = 0, size = firstsubarray[1].length; i < size ; i++)
			{
				firstsubarray[1][i].setMap(map);	
			}

			//plot polyline:
			for (var i = 0, size = firstsubarray[2].length; i < size ; i++)
			{
				firstsubarray[2][i].setMap(map);	
			}
		}
	}
</script>

	<div class="container-fluid">
		<div class="row">
			<nav class="navbar navbar-inverse" role="navigation">
			  <div class="navbar-header">
			    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
			      <span class="icon-bar"></span>
			      <span class="icon-bar"></span>
			      <span class="icon-bar"></span>
			    </button>    
			  </div>
			  <div class="navbar-collapse collapse">
			    <ul class="nav navbar-nav">
			        <li><a id = "step1" href="https://princetonfasttrack.herokuapp.com/">FastTrack</a></li>
			    </ul>
			    <ul class="nav navbar-nav navbar-center">
			        <li><a href="https://goo.gl/forms/zsNMoEaVVvpxOM1l2" id = "feedbackform">Click to leave your anonymous feedback!</a></li>
			    </ul>
			    <ul class="nav navbar-nav navbar-right">
			    	<li><a href="#" onclick=starttutorial();>FastTrack Tutorial</a></li>
					<li><a href="https://bidotair.github.io/Fast-Track/">About FastTrack</a></li>
				</ul>
			  </div>
			</nav>
		</div>
		<div class="row">
			<div class="col-sm-2">
				<form autocomplete="off" >
				  <div class="autocomplete" style="width:200px;">
				    <input id="myInput" type="text" name="src" placeholder="Use My Location">
				    <input id="myInput2" type="text" name="dst" placeholder="Enter Destination">
				    <button id=calculate>Submit</button>
				    
				  </div>			  
				</form>

				<div class="panel panel-default">
					<div class="panel-heading" overflow: hidden;>Results:</div>
					<div class="panel-body" id = "results_body" max-height: 6;overflow-y: scroll;>
						<div class="loader" id = "loaderelement"></div>
						<button type="button" class="btn btn-primary btn-block" href="#collapseExample1" data-toggle="collapse" id = "resultsbtn1"  onclick="resultsbtnfunction(0)">Block level button</button>
						<div class="collapse" id="collapseExample1">
							<ul class="list-group">
								<li class="list-group-item list-group-item-warning" id = "resultsbtn1li1">Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson</li>
								<li class="list-group-item list-group-item-success" id = "resultsbtn1li2">d squid. Nihil anim keffiyeh helvetica, craft</li>
								<li class="list-group-item list-group-item-info" id = "resultsbtn1li3">a beer labore wes anderson cred nesciunt sapiente ea proident.</li>
							</ul>
						</div>

						<button type="button" class="btn btn-primary btn-block" href="#collapseExample2" data-toggle="collapse" id = "resultsbtn2"  onclick="resultsbtnfunction(1)">Block level button</button>
						<div class="collapse" id="collapseExample2">
							<ul class="list-group">
								<li class="list-group-item list-group-item-warning" id = "resultsbtn2li1">Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson</li>
								<li class="list-group-item list-group-item-success" id = "resultsbtn2li2">d squid. Nihil anim keffiyeh helvetica, craft</li>
								<li class="list-group-item list-group-item-info" id = "resultsbtn2li3">a beer labore wes anderson cred nesciunt sapiente ea proident.</li>
							</ul>
						</div>

						<button type="button" class="btn btn-primary btn-block" href="#collapseExample3" data-toggle="collapse" id = "resultsbtn3"  onclick="resultsbtnfunction(2)">Block level button</button>
						<div class="collapse" id="collapseExample3">
							<ul class="list-group">
								<li class="list-group-item list-group-item-warning" id = "resultsbtn3li1">Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson</li>
								<li class="list-group-item list-group-item-success" id = "resultsbtn3li2">d squid. Nihil anim keffiyeh helvetica, craft</li>
								<li class="list-group-item list-group-item-info" id = "resultsbtn3li3">a beer labore wes anderson cred nesciunt sapiente ea proident.</li>
							</ul>
						</div>
					</div>
				</div>

            </div>
			<div class="col-sm-10">
				<div id="map"></div>
				<div id="legend"><h3>Legend</h3></div>

				
				
				<script>
					var map;

					function initMap() {
						var uluru = {lat: 40.346481, lng: -74.658138};
				        	map = new google.maps.Map(document.getElementById('map'), {
				        	zoom: 16.2,
				          	center: uluru,
						mapTypeControl: false
				        });

				        var opt = { minZoom: 15, maxZoom: 19};
						map.setOptions(opt);

						var allowedBounds = new google.maps.LatLngBounds(
						     new google.maps.LatLng(40.3149695,-74.6752898), 
						     new google.maps.LatLng(40.3805075,-74.6361918)
						);
						var lastValidCenter = map.getCenter();

						google.maps.event.addListener(map, 'center_changed', function() {
						    if (allowedBounds.contains(map.getCenter())) {
						        // still within valid bounds, so save the last valid position
						        lastValidCenter = map.getCenter();
						        return; 
						    }

						    // not valid anymore => return to last valid position
						    map.panTo(lastValidCenter);
						});


						
						var icons = {
							Route1: {
								name: 'Walk Only Route',
								icon: 'https://raw.githubusercontent.com/bmukadam/Fast-Track/master/PNG%20for%20Legend/GreyDotted.PNG'
							},
							Route2: {
								name: 'Walk Route to Pickup',
								icon: 'https://raw.githubusercontent.com/bmukadam/Fast-Track/master/PNG%20for%20Legend/YellowDotted.PNG'
							},
							Route3: {
								name: 'Bus Route',
								icon: 'https://raw.githubusercontent.com/bmukadam/Fast-Track/master/PNG%20for%20Legend/BlueSolid.PNG'
							},
							Route4: {
								name: 'Walk Route from Dropoff',
								icon: 'https://raw.githubusercontent.com/bmukadam/Fast-Track/master/PNG%20for%20Legend/GreenDotted.PNG'
							}
							
						};
						
						var legend = document.getElementById('legend');
						for (var key in icons) {
							var type = icons[key];
							var name = type.name;
							var icon = type.icon;
							var div = document.createElement('div');
							div.innerHTML = '<img src="' + icon + '"> ' + name;
							legend.appendChild(div);
						}
						map.controls[google.maps.ControlPosition.TOP_LEFT].push(legend);
					}
					
					

			    </script>
			    <script async defer
			    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDpp8voCHf0PvvD46oNJUQCj4xxhvXcN9U&libraries=geometry&callback=initMap">
			    </script>
				<br>
			</div>
		</div>
	</div>


	<script type="text/javascript">

	function autocomplete(inp, arr) {
	  /*the autocomplete function takes two arguments,
	  the text field element and an array of possible autocompleted values:*/
	  var currentFocus;
	  

	  /*execute a function when someone writes in the text field:*/
	  inp.addEventListener("input", function(e) {
	  	  
	      var a, b, i, val = this.value;
	      /*close any already open lists of autocompleted values*/
	      closeAllLists();
	      if (!val) { return false;}
	      currentFocus = -1;
	      /*create a DIV element that will contain the items (values):*/
	      a = document.createElement("DIV");
	      a.setAttribute("id", this.id + "autocomplete-list");
	      a.setAttribute("class", "autocomplete-items");
	      /*append the DIV element as a child of the autocomplete container:*/
	      this.parentNode.appendChild(a);
	      /*for each item in the array...*/
	      for (i = 0; i < arr.length; i++) {
	        /*check if the item starts with the same letters as the text field value:*/
	        if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
	          /*create a DIV element for each matching element:*/
	          b = document.createElement("DIV");
	          /*make the matching letters bold:*/
	          b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
	          b.innerHTML += arr[i].substr(val.length);
	          /*insert a input field that will hold the current array item's value:*/
	          b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
	          /*execute a function when someone clicks on the item value (DIV element):*/
	          b.addEventListener("click", function(e) {
	              /*insert the value for the autocomplete text field:*/
	              inp.value = this.getElementsByTagName("input")[0].value;
	              /*close the list of autocompleted values,
	              (or any other open lists of autocompleted values:*/
	              closeAllLists();
	          });
	          a.appendChild(b);
	        }
	      }
	  });
	  /*execute a function presses a key on the keyboard:*/
	  inp.addEventListener("keydown", function(e) {
	      var x = document.getElementById(this.id + "autocomplete-list");
	      if (x) x = x.getElementsByTagName("div");
	      if (e.keyCode == 40) {
	        /*If the arrow DOWN key is pressed,
	        increase the currentFocus variable:*/
	        currentFocus++;
	        /*and and make the current item more visible:*/
	        addActive(x);
	      } else if (e.keyCode == 38) { //up
	        /*If the arrow UP key is pressed,
	        decrease the currentFocus variable:*/
	        currentFocus--;
	        /*and and make the current item more visible:*/
	        addActive(x);
	      } else if (e.keyCode == 13 || e.keyCode == 9) {
	        /*If the ENTER key is pressed, prevent the form from being submitted,*/
	        e.preventDefault();
	        if (currentFocus > -1) {
	          /*and simulate a click on the "active" item:*/
	          if (x) x[currentFocus].click();
	        }
	      }
	  });
	  function addActive(x) {
	    /*a function to classify an item as "active":*/
	    if (!x) return false;
	    /*start by removing the "active" class on all items:*/
	    removeActive(x);
	    if (currentFocus >= x.length) currentFocus = 0;
	    if (currentFocus < 0) currentFocus = (x.length - 1);
	    /*add class "autocomplete-active":*/
	    x[currentFocus].classList.add("autocomplete-active");
	  }
	  function removeActive(x) {
	    /*a function to remove the "active" class from all autocomplete items:*/
	    for (var i = 0; i < x.length; i++) {
	      x[i].classList.remove("autocomplete-active");
	    }
	  }
	  function closeAllLists(elmnt) {
	    /*close all autocomplete lists in the document,
	    except the one passed as an argument:*/
	    var x = document.getElementsByClassName("autocomplete-items");
	    for (var i = 0; i < x.length; i++) {
	      if (elmnt != x[i] && elmnt != inp) {
	        x[i].parentNode.removeChild(x[i]);
	      }
	    }
	  }
	  /*execute a function when someone clicks in the document:*/
	  document.addEventListener("click", function (e) {
	      closeAllLists(e.target);
	      });
	}

	/*An array containing all the country names in the world:*/
	var countries = ['1895 Field Dugout', 'Cannon Dial Elm Club', 'Ivy Club', 'Charter Club', 'Cottage Club','Aaron Burr Hall', 'Alexander Hall', 'Alexander Road, 693', 'Alexander Road, 755', 'Alexander Street, 20', 'Alexander Street, 228', 'Alexander Street, 262', 'Alexander Street, 262A', 'Alexander Street, 272', 'Alexander Street, 282', 'Alexander Street, 294', 'Alexander Street, 306', 'Alexander Street, 350', 'Alexander Street, 529', 'Alexander Street, 69', 'Alexander Street, 70', 'Alexander Street, 76', 'Alexander Street, 78', 'Alexander Street, 80', 'Alexander Street, 81', 'Alexander Street, 84', 'Alexander Street, 99', 'Andlinger Center', 'Architectural Laboratory', 'Architecture Building', 'Art Museum', 'Arts Tower', 'Baker Rink', 'Bendheim Center For Finance', 'Bendheim Hall', 'Berlind Theater', 'Blair Hall', 'Bloomberg Hall', 'Bobst Hall', 'Bowen Hall', 'Broadmead, 171', 'Broadmead, 185', 'Brown Hall', 'Bunn Building', 'Butler College', 'Buyers Hall', 'Caldwell Field House', 'Campbell Hall', 'Campus Club', 'Cargot Brasserie', 'Carl C. Icahn Laboratory', 'Carnegie Center, 701', 'Center for Jewish Life', 'Chambers Street, 22', 'Chancellor Green', 'Chapel', 'Charlton Street Substation', 'Charlton Street, 18-18 1/2', 'Chilled Water Plant', 'Clarke Field Dugout', 'Clarke Field Press Box', 'Class of 1879 Hall', 'Class of 1901-Laughlin Hall', 'Class of 1903 Hall', 'Class of 1915 Hall', 'Class of 1927-Clapp Hall', 'Class of 1937 Hall', 'Class of 1938 Hall', 'Class of 1939 Hall', 'Class of 1952 Stadium', 'Clio Hall', 'Cogeneration Plant', 'College Road West, 26', 'College Road, 1-14', 'Computer Science Building', 'Cordish Family Pavilion', 'Corwin Hall', 'Courtyard Annex', 'Cuyler Hall', 'Davis Building', 'DeNunzio Pool', 'Dean Mathey Garage', 'Dickinson Hall', 'Dickinson Street, 10', 'Dickinson Street, 11', 'Dickinson Street, 12-14', 'Dickinson Street, 15', 'Dickinson Street, 16', 'Dickinson Street, 2', 'Dickinson Street, 24', 'Dickinson Street, 8', 'Dillon Court East', 'Dillon Court West', 'Dillon Gymnasium', 'Dinky Bar and Kitchen', 'Dod Hall', 'Dodge Hall', 'Dodge-Osborn Hall', 'East Pyne Building', 'Edwards Hall', 'Edwards Place, 14', 'Edwards Place, 17', 'Edwards Place, 18-40', 'Edwards Place, 19', 'Edwards Place, 21', 'Edwards Place, 27', 'Edwards Place, 29', 'Edwards Place, 31', 'Elementary Particles Lab East', 'Elementary Particles Lab West', 'Elm Drive Substation', 'Elm Drive, 200', 'Engineering Quad', 'Eno Hall', 'Feinberg Hall', 'Ferris Thompson, Western Way, 20-26', 'Ferris Thompson, Western Way, 30-36', 'Ferris Thompson, Western Way, 40-46', 'Ferris Thompson, Western Way, 50-58', 'Ferris Thompson, Western Way, 60-66', 'Ferris Thompson, Western Way, 70-76', 'Ferris Thompson, Western Way, 80-86', 'Fine Hall', 'Firestone Library', 'Fisher Hall', 'FitzRandolph Observatory', 'Foulke Hall', 'Frick Chemistry Laboratory', 'Friend Center', 'Frist Campus Center', 'GBM Office Trailer', 'Gauss Hall', 'Graduate College, New', 'Graduate College, Old', 'Green Hall', 'Grinder Lab', 'Grounds Storage Building', 'Grounds Storage Shed #1', 'Grounds Storage Shed #2', 'Gulick Pavilion', 'Guyot Hall', 'Haaga House', 'Hamilton Hall', 'Harrison Street, 179, APT - 179', 'Harrison Street, 263', 'Harrison Street, Lower, 57', 'Hartley Avenue, 167', 'Hartley Avenue, 302', 'Helm Building', 'Henry Hall', 'Henry House', 'Holder Hall', 'Hoyt Chemical Laboratory', 'Ivy Lane, 5', 'Jadwin Gymnasium', 'Jadwin Hall', 'Johnstone Building', 'Joline Hall', 'Jones Hall', 'Julis Romo Rabinowitz Building', 'Launch House', 'Lawrence Drive, 1', 'Lawrence Drive, 10', 'Lawrence Drive, 11', 'Lawrence Drive, 12', 'Lawrence Drive, 13', 'Lawrence Drive, 14', 'Lawrence Drive, 2', 'Lawrence Drive, 3', 'Lawrence Drive, 4', 'Lawrence Drive, 5', 'Lawrence Drive, 6', 'Lawrence Drive, 7', 'Lawrence Drive, 8', 'Lawrence Drive, 9', 'Lewis Library', 'Little Hall', 'Lockhart Hall', 'Louis A. Simpson International Building', 'Lourie - Love Pavilion', 'Lower Harrison Street, 62', 'Lowrie House', 'MacMillan Annex', 'MacMillan Building', 'Maclean House', 'Madison Hall', 'Maeder Hall', 'Marx Hall', 'Mathey Court, Harrison Street, 289-303', 'Mathey Court, Hartley Avenue, 85-99', 'Mathey Court, Lake Lane, 18-24', 'Mathey Court, Lake Lane, 26-44', 'McCarter Theatre', 'McCormick Hall', 'McCosh Circle, 123', 'McCosh Hall', 'McCosh Infirmary', 'McDonnell Hall', 'McPartland Building', 'Mercer Street, 146', 'Mercer Street, 148', 'Mercer Street, 4', 'Meyers Building', 'Moffett Laboratory', 'Moran Building', 'Morrison Hall', 'Mudd Manuscript Library', 'Mullet Building', 'Murray Place, 19', 'Murray Place, 29', 'Murray Place, 35', 'Murray Place, 37', 'Murray Place, 39', 'Murray Place, 43', 'Murray Place, 55', 'Murray Place, 57', 'Murray Place, 59', 'Murray Theatre', 'Nassau Court, 161', 'Nassau Court, 165-167', 'Nassau Court, 171', 'Nassau Court, 177', 'Nassau Hall', 'Nassau Street, 158', 'Nassau Street, 159', 'Nassau Street, 160', 'Nassau Street, 185', 'Nassau Street, 199', 'Nassau Street, 2-4', 'Nassau Street, 201', 'Nassau Street, 221', 'New Music Building', 'New South Building', 'North Garage', 'North Guard Gate', 'Nursery Greenhouse', 'Nursery Greenhouse #2', 'Nursery Greenhouse #3', 'Nursery Greenhouse #4', 'Nursery Office', 'Nursery Shed', 'Olden Street, 15', 'Palmer House', 'Palmer House Cottage', 'Patton Hall', 'Peretsman Scully Hall', 'Peyton Hall', 'Princeton Neuroscience Institute', 'Mathey College', 'Rockefeller college', 'Princeton Stadium', 'Princeton Station', 'Prospect Avenue, 110', 'Prospect Avenue, 114', 'Prospect Avenue, 115', 'Prospect Avenue, 116', 'Prospect Avenue, 120', 'Prospect Avenue, 172-190', 'Prospect Avenue, 185', 'Prospect Avenue, 58', 'Prospect Avenue, 87', 'Prospect Avenue, 91', 'Prospect House', 'Pyne Hall', 'Roberts Stadium West Pavilion', 'Robertson Hall', 'Rock Magnetism Laboratory', 'Sailing Pavilion East', 'Sailing Pavilion West', 'Scheide Caldwell House', 'Schultz Laboratory', 'Scully Hall', 'Shea Rowing Center', 'Sherrerd Hall', 'Solar 1', 'South Guard Gate', 'Spelman Halls', 'Sports Pavilion', 'Springdale Faculty 1912 House', 'Springdale Faculty Bachelors', "Springdale Faculty Winan's House", 'Springdale Road, 40', 'Stanhope Hall', 'Stony Ford, Hopewell', 'Tennis Pavilion', 'Thomas Laboratory', 'Thompson Building', 'University Place, 11', 'University Place, 15', 'University Place, 19', 'University Place, 23', 'University Place, 27', 'University Place, 35', 'University Place, 36', 'University Place, 39', 'University Place, 41', 'University Place, 45', 'University Place, 47', 'University Place, 48', 'University Place, 71', 'Von Neumann Hall', 'Walker Hall', 'Wallace Dance Building and Theater', 'Wallace Hall', 'Wawa', 'West Garage', 'Western Way, 247', 'Whig Hall', 'Whitman College', 'Wilcox Hall', 'William Street, 40', 'William Street, 41', 'William Street, 42', 'William Street, 58-60', 'William Street, 64', 'William Street, 66', 'William Street, 68', 'Witherspoon Hall', 'Woolworth Music Center', 'Wright Hall', 'Wu Hall', 'Wyman Cottage', 'Wyman House', 'Auditorium Building, 2B', 'Auxiliary Library 12B', 'Cafeteria/Power House 9A', 'McCarter Theatre Center', 'Nassau Inn', 'Panera Bread', 'Urban Outfitters', 'Agricola Eatery', 'Princeton Record Exchange', 'Winberies Restaurant & Bar', 'Witherspoon Grill', 'Palmer Square Management LLC', '200', 'The Peacock Inn', 'Princeton University', 'Albert Einstein home', 'Elements', '84', '32', 'Bristol Myers Squibb Co: Wang Joseph', 'Student Communication Library', 'Alcord Snow Removal & Contractor', '13', 'Princeton University Art Museum', '12', 'Princeton University Swim Lessons', '16', 'Patton Hall at Princeton University', 'Wilson College', '18', 'Princeton University McCosh Health Center', '14', '11', '9', 'Department of Astrophysical Sciences', 'University Cottage Club', 'Prospect Apartments', 'Gotcher Back Certified Massage Therapy', '17', '99', 'Berkshire Hathaway HomeServices Fox & Roach', 'New Road Media', 'Blue Point Grill', '126', 'Ad Energy', 'Hoagie Haven', '100', 'St. Pauls Roman Catholic School', 'Pink Nails', 'Princeton University Press', '191', 'The Bank of Princeton', 'CVS', '21', 'Princeton Summer Theater', 'John Witherspoon Statue in Princeton University', 'Princeton University Chapel', '19', '50', 'Nassau Presbyterian Church', 'Crisis Ministry of Mercer County', '81', '174', 'Princeton University Store', 'Nassau Club', 'Ilangovan Kani M MD', 'Coldwell Banker Residential Brokerage', 'All the Worlds a Stage', '60', 'ARW BAIL BONDS', '49', 'Morven Museum & Garden', '22', 'Nassau Nursery School', '7', '6', 'General Counsel Office', 'New South (Princeton University', 'Forbes College', '4', '1', 'Princeton', 'New GC Common Room', 'Princeton Graduate College', '5', 'Dog Jogz', '2', 'Virtual Board of Advisors', 'LOT 19', 'Sebco Care', 'Dr. George F. Hutchinson Jr, DO', 'Lawrence Apartments', 'Springdale Golf Club', '3', 'Princeton Canoe Rental', 'Turning Basin Park', 'WRd. DNR Parking', 'D&R Canal Trail Pedestrian Crossing', 'LOT 21', 'Princeton Lot 21', 'Finney Field', 'Clarke Field', '8', 'Ferris Thompson Apartments', 'Class of 1926', '25', '27', 'Prospect House & Garden', '28', 'Woodrow Wilson School of Public and International Affairs', '29', '24', '106', 'PJs Pancake House', '157', '20', '43', 'Department of Operations Research and Financial Engineering', '15', 'Information Age Associates', 'Princeton Charter Club']
	

	/*initiate the autocomplete function on the "myInput" element, and pass along the countries array as possible autocomplete values:*/
	//alert("In here")

	autocomplete(document.getElementById("myInput"), countries);
	autocomplete(document.getElementById("myInput2"), countries);
	</script>
</body>
</html>
